window.ucs||(window.ucs={}),window.ucs.UH_MAIN_ID||(window.ucs.UH_MAIN_ID="#yucs"),window.ucs.ymreqid||(window.ucs.ymreqid=function(){var a=(new Date).getTime(),b=null,c="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(){return b=(a+16*Math.random())%16|0,a=Math.floor(a/16),b.toString(16)});return c}),window.ucs._sendBeacon||(window.ucs._sendBeacon=function(a){var b=new Image;b.height=0,b.width=0,b.style.display="none",b.src="https://geo.yahoo.com/t"+a,document.body.appendChild(b)}),window.ucs.YObj||(window.ucs.YObj=function(){var a=document.getElementById("yucs");return"undefined"!=typeof window.Y&&a&&"srp"===a.getAttribute("data-property")?window.Y:YUI()}());YUI.add("gallery-jsonp",function(a){function b(){this._init.apply(this,arguments)}var c=a.Lang.isObject,d=a.Lang.isFunction;b._pattern=/\bcallback=(.*?)(?=&|$)/i,b._template="callback={callback}",b.prototype={_init:function(b,c){this.url=b,c=c||{},d(c)&&(c={on:{success:c}}),c.on=c.on||{},c.on.success||(c.on.success=this._getCallbackFromUrl(b)),this._config=a.merge({on:{},context:this,args:[],format:this._format},c)},_getCallbackFromUrl:function(e){var f,g,h,i,j=e.match(b._pattern);if(j){for(g=a.config.win,h=j[1].split(/\./).reverse(),f=h.shift(),i=h.length-1;i>=0;--i)if(g=g[h[i]],!c(g))return null;if(c(g)&&d(g[f]))return a.bind(g[f],g)}return null},send:function(){function b(a){return d(a)?function(b){delete YUI.Env.JSONP[c],a.apply(e.context,[b].concat(e.args))}:null}if(!this._config.on.success)return this;var c=a.guid().replace(/-/g,"_"),e=this._config,f=e.format.call(this,this.url,"YUI.Env.JSONP."+c);return YUI.Env.JSONP[c]=b(e.on.success),a.Get.script(f,{onFailure:b(e.on.failure),onTimeout:b(e.on.timeout||e.on.failure),timeout:e.timeout}),this},_format:function(a,c){var d,e=b._template.replace(/\{callback\}/,c);return b._pattern.test(a)?a.replace(b._pattern,e):(d=a.slice(-1),"&"!==d&&"?"!==d&&(a+=a.indexOf("?")>-1?"&":"?"),a+e)}},a.JSONPRequest=b,a.jsonp=function(b,c){return new a.JSONPRequest(b,c).send()},YUI.Env.JSONP||(YUI.Env.JSONP={})},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(a){if(a.namespace("ucs"),!a.ucs.MenuUtils){var b='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></li>{separatorBottom}',c='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></li>{separatorBottom}',d='<span class="separator" role="presentation"></span>',e="click",f="a",g="role",h="tabIndex",i="yucs-hide",j="iframe",k="ul",l="li",m="parentNode",n="http://l.yimg.com/a/lib/ush/icon.gif",o="https://s.yimg.com/lq/lib/ush/icon.gif",p=300;a.ucs.MenuUtils=function(a,b){var c=b&&b.panelSelector||k;this.menu=a,this.enableClick=b&&b.enableClick,this.panel=this.menu.one(c),this.panel&&this.init(),this.openDelay=b&&"undefined"!=typeof b.openDelay?b.openDelay:p,this.closeTimer=null,this.overPanel=!1,this.overLink=!1},a.ucs.MenuUtils.prototype={init:function(){this.keyedup=!1,this.menu.on("hover",a.bind(this._handleMenuEnter,this),a.bind(this._handleMouseOut,this),this),this.panel.on("hover",a.bind(this._handlePanelEnter,this),a.bind(this._handlePanelLeave,this),this),this.enableClick&&this.menu.on("click",a.bind(this._handleMenuToggle,this),this),this.menu.delegate(e,this._handleMenuItemClick,"li a",this),this.menu.on("keyup",this._handleKeyup,this),this.menu.on("keydown",this._handleKeydown,this),this.menu.removeClass("yucs-activate"),this._initAria()},_initAria:function(){this.menu.one(f).set(g,"button"),this.panel.all(f).set(g,"menuitemradio"),this.panel.set(g,"menu"),this.panel.all("div,ul,li").set(g,"presentation"),a.UA.ipad||a.UA.mobile||this.panel.set(h,-1),this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:f,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(a){return a.get(m)}},circular:!0})},_refreshAria:function(){this.focusmanager.focusManager.refresh()},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager),this.panel.one(f).set(h,0)},_handleMenuClick:function(a){this.overLink&&this.panel.hasClass(i)&&(this._accessShowMenu(a),this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null))},_handleMenuEnter:function(b){b.halt(),this.overLink=!0,a.later(this.openDelay,this,this._handleMenuClick)},_handlePanelEnter:function(){this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.overPanel=!0},_handlePanelLeave:function(){this.overPanel=!1,this.panelShown&&this._handleMouseOut()},_handleMenuToggle:function(){this.overLink=this.overLink?!1:!0,this.panelShown?(this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))):a.later(this.openDelay,this,this._handleMenuClick)},_handleKeyup:function(a){27===a.keyCode?(this.menu.one(f).focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one(f).focus(),this.keyedup=!0)},_handleKeydown:function(a){this.panel.hasClass(i)||a.stopPropagation(),40===a.keyCode&&a.preventDefault()},_handleDocumentClick:function(a){return this.panel.contains(a.target)||a.target._node===this.panel._node||this.panel.hasClass(i)||a.target===this.menu.one(">a")||a.target.get("parentNode")===this.menu.one(">a")?void(this.skipBlur=!0):void this._hideMenu()},_accessShowMenu:function(b){this._hideAllMenus(),this._showMenu(b),this.panel.focus(),a.Node.DOM_EVENTS.touchend=!0,this.documentBlurHandle=a.on("blur",function(a){var b=this;this.panel.contains(a.target)||a.target._node===this.panel._node||this.panel.hasClass(i)||(this.skipBlur||(this.timeout=setTimeout(function(){b._hideMenu()},50)),this.skipBlur=!1)},this.panel,this),this.documentFocusHandle=a.on("focus",function(a){this.timeout&&this.panel.hasChildNodes(a.target)&&(clearTimeout(this.timeout),this.timeout=null)},this.panel,this)},_showMenu:function(){this.panel.removeClass(i),this._addIframeShim();var a=this.menu.one(j);a&&a.removeClass(i)},_position:function(){var a=this.menu.get("region");this.panel.hasClass("yucs-menu-right")||this.panel.hasClass("yucs-menu-left")||this.panel.setStyle("left",a[0]),this.panel.setStyle("top",a[1]+13)},_handleMouseOut:function(){this.overLink=!1,this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))},_handleLeave:function(){this.overPanel||this.overLink||this._hideMenu()},_hideMenu:function(){this.panel.addClass(i),this.overPanel=!1;var a=this.menu.one(j);a&&a.addClass(i),this.documentBlurHandle&&this.documentBlurHandle.detach(),this.documentFocusHandle&&this.documentFocusHandle.detach(),this.documentClickHandle&&this.documentClickHandle.detach(),this.documentMouseDownHandle&&this.documentMouseDownHandle.detach(),this.documentTouchEndHandle&&this.documentTouchEndHandle.detach(),this.keyedup=!1},_hideAllMenus:function(){var b=a.all("yucs-menu iframe"),c=a.one("#yucs-top-menu");this._hideMenu(),c&&c.one("ul")&&(c.one("ul").addClass(i),a.one("#yucs-more").removeClass("yucs-menu-active")),b.addClass(i)},_addIframeShim:function(){var b,c=a.all("select"),d=a.UA.ie<=6;d&&0!==c.size()&&(b=this.menu.one(j),b||(b=document.createElement(j),b=this.panel.get(m).insertBefore(b,this.panel)),b.className="yucs-shim",b.setStyle("position","absolute"),b.setStyle("width",this.panel.getComputedStyle("width")),b.setStyle("height",this.panel.getComputedStyle("height")),b.setStyle("top",this.panel.getY()+"px"),b.setStyle("border","0px none"),this.menu.hasClass("yucs-help")||b.setStyle("left",0),b.frameBorder=0)},_addMenuGroups:function(a,b,c){for(var d=this.menu.one(k),e="",f=d.get("children")._nodes.length?!0:!1,g=0,h=a.length;h>g;g++){var i=a[g].length;"bottom"===b?a[g][0].separatorTop=!0:(h-1>g||f)&&(a[g][i-1].separatorBottom=!0),e+=this._addMenuGroup(a[g],c)}"bottom"===b?d.append(e):d.prepend(e)},_addMenuGroup:function(a,b){for(var c="",d=0,e=a.length;e>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass="debug-item"):(a[d].isDebugItem=!1,a[d].menuClass="minty-item"),c+=this._addMenuItem(a[d]);return c},_addMenuItem:function(d){var e="";switch(d.checkedAria=d.isActive?'aria-checked="true"':"",d.disabledAria=d.isDisabled?'aria-disabled="true"':"",d.actionType){case"link":e=a.substitute(b,d,this._processTemplateValue);break;case"customEvent":e=a.substitute(c,d,this._processTemplateValue)}return e&&(e=d.isDebugItem?e.replace(/separator/,"separator debug-item"):e.replace(/separator/,"separator minty-item")),e},_clearMenuItem:function(a){this.menu.one(k).all("."+a).each(function(a){a.remove(!0)})},_processTemplateValue:function(b,c,e){a.log("key = "+b+" value = "+c+" meta_data = "+e);var f="",g="https:"===document.location.protocol?o:n;switch(b){case"icon":void 0!==c&&(f="available"===c?'<img src="'+g+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+g+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+g+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+g+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+g+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(f=d);break;case"separatorBottom":c&&(f=d);break;case"actionData":c&&(f='data-mad="'+c+'"');break;case"isDisabled":c&&(f="disabled");break;case"isActive":c&&(f="sp active");break;case"checkedAria":f=c;break;default:f=c}return f},_resetItemStatus:function(a){var b,c=a.ancestor(k).all(l),d=a.ancestor(k).all("li.disabled");c.removeClass("sp active"),d.removeClass("disabled"),a.getAttribute("data-dis")&&(b=a.ancestor(l),b.addClass("disabled")),a.getAttribute("data-hs")&&(b=a.ancestor(l),b.addClass("sp active"))},_handleMenuItemClick:function(a){a.target}}}},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]}),function(){var a=document.getElementById("yucs");a&&window.ucs.YObj.use("node","ucs-menu-utils",function(a){var b=a.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(b){new a.ucs.MenuUtils(b)})})}();!function(){function a(a){switch(a){case"tr-tr":return[" "];case"es-cl":case"nl-nl":case"ta-in":case"zh-hant-cn":case"hi-in":case"kn-in":return["-"];case"de-at":case"de-ch":case"de-de":case"fi-fi":case"nb-no":case"pl-pl":case"ro-ro":case"ru-ru":return["."];default:return["/"]}}function b(a){switch(a){case"en-ae":case"en-au":case"en-ca":case"en-ie":case"en-in":case"en-my":case"en-nz":case"en-ph":case"en-sg":case"en-us":case"es-us":case"ja-jp":case"sv-se":return[e,g,f,g,d].join("");case"ro-ro":case"fi-fi":case"pl-pl":case"en-gb":case"th-th":case"en-ie":case"tr-tr":case"vi-vn":return[f,g,e,g,c].join("");case"zh-hant-cn":case"zh-hant-tw":return[d,g,e,g,f].join("");default:return[f,g,e,g,d].join("")}}var c="%Y",d="%y",e="%m",f="%d",g="_",h=document.getElementById("yucs")&&document.getElementById("yucs").getAttribute("data-lang").toLowerCase()||"en-us";window.ucs||(window.ucs={}),window.ucs.getLocalDateFormat=function(c){c=c.toLowerCase();var d=a(c),e=b(c);return e.replace(new RegExp(g,"g"),d)},window.ucs.localeDateFormat=window.ucs.getLocalDateFormat(h)}();window.ucs.YObj.use("datatype-date",function(){}),YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp"),a.ucs.Timestamp={getTimeStamp:function(b){var c,d,e,f,g,h="AM",i=a.one("#yucs"),j=b.dateRef||new Date,k=b.date,l=b.locale?b.locale:i.getAttribute("data-lang"),m=k.getTime(),n=k.getDate(),o=j.getDate(),p=j.getTime(),q=p-m,r=o-n,s=!0,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return s=/^en-us$/i.test(l),q=parseInt(q/1e3,10),d=k.getMonth(),e=k.getHours(),f=k.getMinutes(),g=p-(60*j.getHours()*60*1e3+60*j.getMinutes()*1e3+1e3*j.getSeconds()+j.getMilliseconds()),10>f&&(f="0"+f),e>=12&&(h="PM"),e>12&&(e-=12),b.type&&"short"===b.type&&a.DataType&&a.DataType.Date?0===r?c=e+":"+f+" "+h:(/^th-th$/i.test(l)&&k.setFullYear(k.getFullYear()+543),c=a.DataType.Date.format(k,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,"")):s?0===r?60>q?c=q>1?q+" secs ago":q+" sec ago":3600>q?(q=Math.ceil(q/60,10),c=2>q?q+" min ago":q+" mins ago"):86400>q&&(q=Math.ceil(q/3600),c=q>1?q+" hours ago":q+" hour ago"):c=864e5>g-m&&0!==r?"Yesterday "+e+":"+f+" "+h:t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h:c=t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h,c}}},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-logodebug",function(a){a.namespace("ucs");var b=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),d=!1;-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(d=!0),(b&&0===b.offsetWidth&&void 0===b.readyState||b&&0===b.offsetWidth&&"uninitialized"===b.readyState||d&&b&&"uninitialized"===b.readyState||d&&b&&void 0===b.readyState)&&(c.style.visibility="visible",c.style.position="relative"),a.ucs.LogoDebug=function(a){a.on("click",this._handleClick,this),this.publish("ucs:logoDebug",{broadcast:2,emitFacade:!0})},a.ucs.LogoDebug.prototype={_handleClick:function(a){a.altKey&&(a.halt(),this.fire("ucs:logoDebug"))}},a.Global.on("ucs:themeChange",function(){a.later(11,this,function(){a.one("#animator")&&a.one("#animator").setStyle("display","none"),a.one("#yucs-logo-ani")&&(a.one("#yucs-logo-ani").setStyle("position","relative"),a.one("#yucs-logo-ani").setStyle("visibility","visible"),a.one(".lt #yucs-logo-ani")?a.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important"):a.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0% !important"))})}),a.Global.on("ucs:playLogo",function(){"undefined"!=typeof Aniden&&Aniden.play&&Aniden.play()}),a.augment(a.ucs.LogoDebug,a.EventTarget)},"1.0",{requires:["node"]}),function(){window.ucs.YObj.use("node","ucs-logodebug",function(a){var b=a.one("#yucs-logo");if(b){new a.ucs.LogoDebug(b)}})}();YUI.add("ucs-switch-theme",function(a){"use strict";a.namespace("ucs"),a.ucs.SwitchTheme=function(a){this.init(a)},a.ucs.SwitchTheme.prototype={init:function(a){this.container=a},_getTheme:function(){return this.container.hasClass("lt")?"light":"dark"},_setTheme:function(a){"light"===a?this.container.addClass("lt"):"dark"===a&&this.container.removeClass("lt")}}}),window.ucs.YObj.use("node","ucs-switch-theme",function(a){if(window.ucs.UhTheme){var b=a.one("#yucs");window.ucs.UhTheme=new a.ucs.SwitchTheme(b),window.ucs.UhTheme.getTheme=function(){return window.ucs.UhTheme._getTheme()},window.ucs.UhTheme.setTheme=function(a){return window.ucs.UhTheme._setTheme(a)}}});window.ucs&&window.ucs.YObj&&!function(a){YUI.add("ucs-meta",function(a){"use strict";if(a.namespace("ucs"),a.ucs.Meta)return void a.log("Y.ucs.Meta is already defined.","debug","ucs-meta");var b=null,c=function(b){return a.version>="3.5.1"?b.getData():{authstate:b.getAttribute("data-authState"),cobrand:b.getAttribute("data-cobrand"),crumb:b.getAttribute("data-crumb"),mccrumb:b.getAttribute("data-mc-crumb"),gta:b.getAttribute("data-gta"),device:b.getAttribute("data-device"),experience:b.getAttribute("data-experience"),firstname:b.getAttribute("data-firstname"),flight:b.getAttribute("data-flight"),forcecobrand:b.getAttribute("data-forcecobrand"),guid:b.getAttribute("data-guid"),host:b.getAttribute("data-host"),https:b.getAttribute("data-https"),languagetag:b.getAttribute("data-languagetag"),property:b.getAttribute("data-property"),protocol:b.getAttribute("data-protocol"),shortfirstname:b.getAttribute("data-shortfirstname"),shortuserid:b.getAttribute("data-shortuserid"),status:b.getAttribute("data-status"),spaceid:b.getAttribute("data-spaceid"),test_id:b.getAttribute("data-test_id"),userid:b.getAttribute("data-userid"),style:b.getAttribute("data-style")}};a.ucs.Meta=function(a){b=this,b.components={meta:a},b.data=c(a)},a.ucs.Meta.prototype={authState:function(){return a.Object.getValue(b.data,"authstate")},cobrand:function(){return a.Object.getValue(b.data,"cobrand")},crumb:function(){return a.Object.getValue(b.data,"crumb")},mccrumb:function(){return a.Object.getValue(b.data,"mccrumb")},gta:function(){return a.Object.getValue(b.data,"gta")},device:function(){return a.Object.getValue(b.data,"device")},experience:function(){return a.Object.getValue(b.data,"experience")},find:function(b){return a.one(a.Lang.sub("#yucs-{component}",{component:b}))},firstname:function(){return a.Object.getValue(b.data,"firstname")},flight:function(){return a.Object.getValue(b.data,"flight")},forcecobrand:function(){return a.Object.getValue(b.data,"forcecobrand")},guid:function(){return a.Object.getValue(b.data,"guid")},host:function(){return a.Object.getValue(b.data,"host")},https:function(){return a.Object.getValue(b.data,"https")},languagetag:function(){return a.Object.getValue(b.data,"languagetag")},property:function(){return a.Object.getValue(b.data,"property")},protocol:function(){return a.Object.getValue(b.data,"protocol")},shortfirstname:function(){return a.Object.getValue(b.data,"shortfirstname")},shortuserid:function(){return a.Object.getValue(b.data,"shortuserid")},status:function(){return a.Object.getValue(b.data,"status")},spaceid:function(){return a.Object.getValue(b.data,"spaceid")},test_id:function(){return a.Object.getValue(b.data,"test_id")},userid:function(){return a.Object.getValue(b.data,"userid")},style:function(){return a.Object.getValue(b.data,"style")},toJSON:function(){return{authState:b.authState(),cobrand:b.cobrand(),crumb:b.crumb(),mccrumb:b.mccrumb(),gta:b.gta(),device:b.device(),experience:b.experience(),firstname:b.firstname(),flight:b.flight(),forcecobrand:b.forcecobrand(),guid:b.guid(),host:b.host(),https:b.https(),languagetag:b.languagetag(),property:b.property(),protocol:b.protocol(),shortfirstname:b.shortfirstname(),shortuserid:b.shortuserid(),status:b.status(),spaceid:b.spaceid(),test_id:b.test_id(),userid:b.userid(),style:b.style()}}}},"0.0.1",{requires:["node"]}),a.YObj.use("ucs-meta",function(b){b.Lang.isObject(a.Meta)&&a.Meta instanceof b.ucs.Meta||(a.Meta=new b.ucs.Meta(b.one("#yucs-meta")))})}(window.ucs);YUI.add("ucs-beacon",function(d){var a=null,c=function(h){var e=null,j={},k="",f="",g=null;e=b();if(e!==null){d.log("emit_beacon: beacon=YMedia.Af.Beacon","debug","Beacon");d.log(h,"debug");switch(h.type){case"info":e.info(h.source,{code:h.code,message:d.JSON.stringify(h)});break;case"error":e.error(h.source,{},{code:h.code,message:d.JSON.stringify(h)});break;}}else{d.log("emit_beacon: beacon=geo.yahoo.com","debug","Beacon");d.log(h,"debug");j.s=1197747123;j.r=encodeURIComponent(location.href);j.t=Math.random();j.dmsgs=encodeURIComponent(d.JSON.stringify(h.dmsgs));j.sec=encodeURIComponent(h.sec);j.slk=encodeURIComponent(h.slk);j.type=h.type;for(g in j){k+=f+g+"="+j[g];f="&";}e=new Image(0,0);e.src="https://geo.yahoo.com/p?"+k;}},b=function(){var e=null;if(typeof YMedia!=="undefined"&&d.Lang.isObject(YMedia)&&d.Lang.isObject(YMedia.Af)&&d.Lang.isObject(YMedia.Af.Beacon)){e=YMedia.Af.Beacon;if(d.Lang.isFunction(e.setSampleSize)){if(window.location.href.match(/debug_beacon=1/)){e.setSampleSize(1);}}else{d.log("get_beacon: setSampleSize method not found!");}}return e;};d.namespace("ucs").Beacon={error:function(e){c(e);},info:function(e){c(e);},perf:function(e){c(e);}};},"1.0",{requires:["json"]});YUI.add("comet",function(a){function b(){b.superclass.constructor.apply(this,arguments)}a.namespace("Comet");var c={},d="comet:ready";a.initComet=function(e,f){var g=e.replace(/https:/,"http:");return"/"===g.substr(-1)&&(g=g.substring(0,g.length-1)),c[g]?a.log("init_comet: instance is already created. url="+g,"debug","Comet"):(a.log("init_comet: create instance. url="+g,"debug","Comet"),a.publish(d),c[g]=new b,c[g].clearListeners()),f&&c[g].addListener("/meta/handshake",f),c[g].initBayeux(e,function(b){b.successful&&a.fire(d,{message:b})}),c[g]},b.NAME="Comet",b.ATTRS={uri:{value:null,setter:function(a){if(null!==a){var b=window.location.protocol;-1!==b.indexOf("https")?a=a.replace(/http:/,"https:"):-1!==b.indexOf("http")&&(a=a.replace(/https:/,"http:"));var c=a.toLowerCase();return-1!==c.indexOf("https://")?this.set("protocol","https://"):-1!==c.indexOf("http://")&&this.set("protocol","http://"),a}}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}},a.extend(b,a.Base,{_clientState:"unconnected",_advice:{},_connected:!1,_config:{backoffIncrement:1e3,maxBackoff:1e4,maxNetworkDelay:3e5,delayedSendMaxCount:10,advice:{timeout:6e4,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5e3}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:!1,_isSendingQueue:!1,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new a.AsyncQueue,_ioQueue_c2s:a.io.queue,_ioQueue_s2c:a.io.queue,_jsonp:null,_listeners:{},initializer:function(){this.setClientState("unconnected"),a.on("beforeunload",a.bind(function(){"unconnected"!==this.getClientState()&&this.disconnect()},this),window)},config:function(b,c){a.Object.setValue(this._config,b,c)},_Queue_send:function(b){var c=this;c._batch(b),c.getClientId()&&(c._isSendingQueue||c._outgoing.length<=0||(a.each(c._outgoing,function(a){a=c._patchMessage(a)}),c._IO_send(!0,c._outgoing),c._outgoing=[]))},_nextQueueSend:function(){this._Queue_send()},_IO_send:function(a,b){var c=this;if(c.get("uri"))if(a){if(c._isSendingQueue||!b)return;c._IO_Queue_Send(b)}else{if(!c.getClientId())return;if(c._isLongpollingConnect||!b)return;c._IO_Longpolling_Send(b)}},_IO_Queue_Send:function(b){a.log("io_queue: ","debug","Comet"),a.log(b,"debug");var c=this;c.setTokenHeader(c._token);var d=a.merge(c.get("ioCfg"),{context:c,timeout:c._config.maxNetworkDelay,data:a.JSON.stringify(b),xdr:{credentials:!0},on:{success:function(d,e){try{a.log("io_queue: e.success","debug","Comet"),a.log(e,"debug");var f=a.JSON.parse(e.responseText);c._handleResponse(f)}catch(g){return a.log("io_queue: e.success.exception","debug","Comet"),a.log(g,"debug"),void c._handleFailure(b,"json parse error")}},failure:function(d,e){a.log("io_queue: e.failure","debug","Comet"),a.log(e,"debug"),c._handleFailure(b,"500::io failed")},start:function(){a.log("io_queue: e.start","debug","Comet"),c._isSendingQueue=!0},complete:function(){a.log("io_queue: e.complete","debug","Comet"),c._isSendingQueue=!1,c._nextQueueSend()}}});c._ioQueue_c2s.stop(),c._ioQueue_c2s(c.get("uri"),d),c._ioQueue_c2s.start()},_IO_Jsonp_Send:function(b){a.log("io_jsonp: ","debug","Comet"),a.log(b,"debug");var c=this;if(c.get("uri")){var d=c.get("uri")+"?callback={callback}",e=encodeURIComponent(a.JSON.stringify(b));d=d+"&data="+e,c._jsonp=new a.JSONPRequest(d,{on:{success:function(b){a.log("io_jsonp: e.success","debug","Comet"),a.log(b,"debug"),c._handleResponse(b)},timeout:function(d){a.log("io_jsonp: e.timeout","debug","Comet"),a.log(d,"debug"),c._handleFailure(b,"408:"+c._config.subscribe.jsonpTimeout+":jsonp timeout")},failure:function(){a.log("io_jsonp: e.failure","debug","Comet"),c._handleFailure(b,"500::jsonp failed")}},timeout:c._config.subscribe.jsonpTimeout}),c._jsonp.send()}},_IO_Longpolling_Send:function(b){a.log("io_longpolling: ","debug","Comet"),a.log(b,"debug");var c=this;c.setTokenHeader(c._token);var d=a.merge(c.get("ioCfg"),{context:c,timeout:c._config.maxNetworkDelay,xdr:{credentials:!0},data:a.JSON.stringify(b),on:{success:function(d,e){try{a.log("io_longpolling: e.success","debug","Comet"),a.log(e,"debug");var f=a.JSON.parse(e.responseText);c._handleResponse(f)}catch(g){return a.log("io_longpolling: e.success.exception","debug","Comet"),a.log(g,"debug"),void c._handleFailure(b,"json parse error")}},failure:function(d,e){a.log("io_longpolling: e.failure","debug","Comet"),a.log(e,"debug"),c._handleFailure(b,"500::io failed")},start:function(){a.log("io_longpolling: e.start","debug","Comet"),c._isLongpollingConnect=!0},complete:function(){a.log("io_longpolling: e.complete","debug","Comet"),c._isLongpollingConnect=!1}}});c._ioQueue_s2c.stop(),c._ioQueue_s2c(c.get("uri"),d),c._ioQueue_s2c.start()},_handleResponse:function(b){if(a.log("handle_response:","debug","Comet"),a.log(b),void 0!==b&&null!==b){var c=this;a.each(b,function(a){c._updateAdvice(a.advice),a.originalURI=c._urlOrigin;var b=a.channel;switch(b){case"/meta/handshake":c._handshakeResponse(a);break;case"/meta/connect":c._connectResponse(a);break;case"/meta/disconnect":c._disconnectResponse(a);break;case"/meta/subscribe":c._subscribeResponse(a);break;case"/meta/unsubscribe":c._unsubscribeResponse(a);break;default:c._messageResponse(a)}})}},_updateAdvice:function(a){this._advice=a?this._mixin(!1,{},this._config.advice,a):this._config.advice},_handshakeResponse:function(b){var c=this;if(b.successful){c.setClientState("connected"),c._clientId=b.clientId,c._advice.VIP&&c.set("uri",c.get("protocol")+c._advice.VIP+"/comet"),c._notifyListeners("/meta/handshake",b),c._Queue_send();var d=c._isDisconnected()?"none":c._advice.reconnect;switch(a.log("handshake_response: action="+d,"debug","Comet"),d){case"retry":c._resetBackoff(),c._delayedConnect();break;case"handshake":c.setClientState("unconnected"),c._resetBackoff(),c._delayedHandshake();break;case"none":c._disconnect(!1)}}else c._failHandshake(b)},_failHandshake:function(a){var b=this;b.setClientState("unconnected"),b._clientId=null,b._notifyListeners("/meta/handshake",a),b._notifyListeners("/meta/unsuccessful",a);var c="none"!==b._advice.reconnect;c?(b._increaseBackoff(),b._delayedHandshake()):b._disconnect(!1)},_delayedHandshake:function(){var a=this;this._delayedSend(function(){a._handshake()})},_subscribeResponse:function(a){a.successful?(this._subscribeChannel[a.subscription]&&this._subscribeChannel[a.subscription]===!0||(this._subscribeChannel[a.subscription]=!0),a.ext["Comet-auth-token"]&&(this._token=a.ext["Comet-auth-token"]),this._notifyListeners("/meta/subscribe",a)):this._failSubscribe(a)},_failSubscribe:function(a){this._notifyListeners("/meta/subscribe",a),this._notifyListeners("/meta/unsuccessful",a)},_connectResponse:function(b){var c=this;if(!c._isDisconnected())if(c._connected=b.successful,c._connected){c.setClientState("connected"),c._notifyListeners("/meta/connect",b);var d=c._isDisconnected()?"none":c._advice.reconnect;switch(a.log("connect_response: action="+d,"debug","Comet"),d){case"retry":c._resetBackoff(),c._delayedConnect();break;case"handshake":c.setClientState("unconnected"),c._resetBackoff(),c._delayedHandshake();break;case"none":c._disconnect(!1)}}else c._failConnect(b)},_failConnect:function(a){var b=this;b._notifyListeners("/meta/connect",a),b._notifyListeners("/meta/unsuccessful",a);var c=b._isDisconnected()?"none":b._advice.reconnect;switch(c){case"retry":b._delayedConnect(),b._increaseBackoff();break;case"subscribe":b._delayedConnect(),b._increaseBackoff();break;case"handshake":b.setClientState("unconnected"),b._resetBackoff(),b._delayedHandshake();break;case"none":b._disconnect(!1)}},_delayedConnect:function(){var a=this;this._delayedSend(function(){a._connect()})},_disconnectResponse:function(a){a.successful?(this._disconnect(!1),this._notifyListeners("/meta/disconnect",a)):this._failDisconnect(a)},_failDisconnect:function(a){this._disconnect(!0),this._notifyListeners("/meta/disconnect",a),this._notifyListeners("/meta/unsuccessful",a)},_unsubscribeResponse:function(a){a.successful?(this._subscribeChannel[a.subscription]&&this._subscribeChannel[a.subscription]===!0&&delete this._subscribeChannel[a.subscription],this._notifyListeners("/meta/unsubscribe",a)):this._failUnsubscribe(a)},_failUnsubscribe:function(a){this._notifyListeners("/meta/unsubscribe",a),this._notifyListeners("/meta/unsuccessful",a)},_messageResponse:function(a){void 0===a.successful?a.data?this._notifyListeners(a.channel,a):this._notifyListeners("/meta/unsuccessful",a):a.successful?this._notifyListeners("/meta/publish",a):this._failMessage(a)},_failMessage:function(a){this._notifyListeners("/meta/publish",a),this._notifyListeners("/meta/unsuccessful",a)},_delayedSend:function(a){var b=this,c=b._advice.interval+b._backoff;if(b._config.maxBackoff<=b._backoff?b._delayedSendCount++:b._delayedSendCount=0,b._delayedSendCount>b._config.delayedSendMaxCount){var d=b.get("uri");if(b.set("uri",b._urlOrigin),d===b.get("uri"))return;b._resetBackoff(),b._delayedSendCount=0}b._queue.add({fn:a,timeout:c}),b._queue.run()},_handshakeFailure:function(a,b){this._failHandshake({successful:!1,failure:!0,channel:"/meta/handshake",request:a,advice:{reconnect:"retry",interval:this._backoff},error:b||"",ext:a.ext||{},id:a.id||""})},_connectFailure:function(a,b){this._connected=!1,this._failConnect({successful:!1,failure:!0,channel:"/meta/connect",request:a,advice:{reconnect:"retry",interval:this._backoff},clientId:a.clientId||"",error:b||"",ext:a.ext||{},id:a.id||""})},_disconnectFailure:function(a,b){this._failDisconnect({successful:!1,failure:!0,channel:"/meta/disconnect",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",error:b||"",ext:a.ext||{},id:a.id||""})},_subscribeFailure:function(a,b){this._failSubscribe({successful:!1,failure:!0,channel:"/meta/subscribe",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_unsubscribeFailure:function(a,b){this._failUnsubscribe({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_messageFailure:function(a,b){this._failMessage({successful:!1,failure:!0,channel:a.channel,request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_handleFailure:function(a,b){var c,d,e;for(e=0;e<a.length;++e)switch(c=a[e],d=c.channel){case"/meta/handshake":this._handshakeFailure(c,b);break;case"/meta/connect":this._connectFailure(c,b);break;case"/meta/disconnect":this._disconnectFailure(c,b);break;case"/meta/subscribe":this._subscribeFailure(c,b);break;case"/meta/unsubscribe":this._unsubscribeFailure(c,b);break;default:this._messageFailure(c,b)}},_notifyListeners:function(a,b){this._notify(a,b),this._notify(a+"/*",b);var c=a.split("/"),d=c.length-1,e=0;for(e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&this._notify(f,b),this._notify(f,b)}},_notify:function(b,c){var d=this._listeners[b];d&&a.each(d,function(b){a.Lang.isFunction(b.listener)&&b.listener(c)})},_isDisconnected:function(){return"unconnected"===this._clientState},_resetBackoff:function(){this._backoff=0},_nextMessageId:function(){return++this._lastMessageId+""},_increaseBackoff:function(){this._backoff<this._config.maxBackoff&&(this._backoff+=this._config.backoffIncrement)},_createMessage:function(b,c){c=c||{};var d=(new Date).valueOf(),e=window.location.host,f=[],g=a.merge(this.get("ext").all,this.get("ext")[b],c.ext||{},{timestamp:d,host:e||""});switch(b){case"handshake":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b]));break;case"connect":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId()}));break;case"subscribe":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),subscription:c.channel}));break;case"unsubscribe":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),subscription:c.channel}));break;case"publish":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),channel:c.channel,data:c.data}));break;case"disconnect":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId()}))}return f},_handshake:function(a){var b=this;if("unconnected"===b.getClientState()){a&&a.listener&&b._addListener(a,!1),b._clientId=null,b._token=null,b.resetTokenHeader(),b._clearSubscriptions(),b._updateAdvice(b._config.advice);var c=b._createMessage("handshake",a);b._IO_send(!0,c),b.setClientState("connecting")}else if("connected"===b.getClientState()){var d={successful:!0,channel:"/meta/handshake",clientId:b._clientId,originalURI:b._urlOrigin};b._notifyListeners("/meta/handshake",d)}},_connect:function(a){var b=this;if("connected"===b.getClientState()&&!b._isLongpollingConnect){var c=b._createMessage("connect",a);b._IO_send(!1,c)}},_subscribeJSONP:function(a){if(a&&a.channel&&this.getClientId()&&(!this._subscribeChannel[a.channel]||this._subscribeChannel[a.channel]!==!0)){a.listener&&this._addListener(a,!0);var b=this._createMessage("subscribe",a);this._IO_Jsonp_Send(b)}},_unsubscribe:function(a){if(this.getClientId()&&(a&&a.channel&&this.removeListeners(a.channel),a&&a.channel)){var b=this._createMessage("unsubscribe",a);this._Queue_send(b)}},_disconnect:function(a){var b=this;if(a&&(b._ioQueue_c2s.stop(),b._ioQueue_s2c.stop()),b.setClientState("unconnected"),b._clientId=null,b._resetBackoff(),b._queue.stop(),b._outgoing.length>0){var c=b._outgoing;b._outgoing=[],b._handleFailure(c,"500::canceled after disconnect")}b._clearSubscriptions()},_patchMessage:function(a){return a.id||(a.id=this._nextMessageId()),a.clientId=this.getClientId(),"/meta/handshake"===a.channel&&delete a.clientId,a},_batch:function(){a.each(arguments,function(b){if(b&&a.Lang.isArray(b)){var c=0;for(c=0;c<b.length;++c)this._outgoing.push(b[c])}else b&&this._outgoing.push(b)},this)},_clearSubscriptions:function(){a.each(this._listeners,function(b){b&&a.each(b,function(a,b,c){a&&a.isSub&&c.splice(b)})}),this._subscribeChannel={}},_reDoSubscriptions:function(){a.each(this._subscribeChannel,function(a,b){a&&(this._subscribeChannel[b]=!1,this._subscribeJSONP({channel:b}))},this)},isDuplicatedListener:function(a,b){var c=0;for(c=0;c<b.length;++c){var d=b[c];if(d&&d.listener&&d.listener.toString()===a.toString())return!0}return!1},_addListener:function(b,c,d){b&&b.listener&&a.Lang.isFunction(b.listener)&&(this._listeners[b.channel]?(d||!this.isDuplicatedListener(b.listener,this._listeners[b.channel]))&&this._listeners[b.channel].push({listener:b.listener,isSub:c}):this._listeners[b.channel]=[{listener:b.listener,isSub:c}])},_mixin:function(a,b){var c,d,e=b||{};for(c=2;c<arguments.length;++c){var f=arguments[c];if(void 0!==f&&null!==f)for(d in f){var g=f[d],h=e[d];g!==b&&void 0!==g&&(e[d]=a&&"object"==typeof g&&null!==g?g instanceof Array?this._mixin(a,h instanceof Array?h:[],g):this._mixin(a,{},g):g)}}return e},destructor:function(){},getClientState:function(){return this._clientState},setClientState:function(a){this._clientState=a},getClientId:function(){return this._clientId},initBayeux:function(a,b){this._urlOrigin=a,this.set("uri",a),this._handshake({channel:"/meta/handshake",listener:b})},subscribe:function(a,b){this._subscribeJSONP({channel:a,listener:b})},unsubscribe:function(a){this._unsubscribe({channel:a})},disconnect:function(a){var b=this;if(a&&b._addListener({channel:"/meta/disconnect",listener:a},!1),"unconnected"!==b.getClientState()&&b.getClientId()){var c=b._createMessage("disconnect");b._Queue_send(c)}},publishMsg:function(a,b){if(a&&b){var c={channel:a,data:b},d=this._createMessage("publish",c);this._Queue_send(d)}},clearListeners:function(){this._listeners={}},addListener:function(b,c,d){d=d||!1,(c||!a.Lang.isFunction(c))&&this._addListener({channel:b,listener:c},!1,d)},removeListeners:function(a){this._listeners[a]&&delete this._listeners[a]},setUserInfo:function(a,b){if(a&&b){var c=this.get("ext");c.subscribe["Comet-subscriber-auth-info"]={uid:a,user_type:"yahoo",user_cred:b}}},setUserInfoWithCookie:function(a){if(a){var b=this.get("ext");b.subscribe["Comet-subscriber-auth-info"]={uid:a,user_type:"yahoo",user_cred:"Any Value"}}},setTokenHeader:function(a){if(a){var b=this.get("ioCfg");b.headers.Authorization="Basic token="+a}},resetTokenHeader:function(){var a=this.get("ioCfg");a.headers.Authorization="Basic token="},setYcaHeader:function(a,b){if(a){var c=this.get("ioCfg");c.headers["Yahoo-App-Auth"]=a}if(b){var d=this.get("ext");d.publish["Comet-opaque-id"]=b}}}),a.Comet=b},"3.4.1",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});YUI.add("ucs-comet-conn",function(a){"use strict";a.namespace("ucs");var b={counts_max:{unsuccessful:{"/meta/handshake":25,"/meta/subscribe":25,"/meta/unsubscribe":25,"/meta/connect":25,"/meta/disconnect":25}},prod:{notifications:{host:"https://pr.comet.yahoo.com/comet"},mail_count:{host:"https://pr.comet.yahoo.com/comet"},system_status:{host:"https://comet.yahoo.com/comet"}},nonprod:{notifications:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},mail_count:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},system_status:{host:"http://perf501.snp.mobile.gq1.yahoo.com/comet"}}},c="connect",d="disconnect",e="message",f="error",g={};a.ucs.CometConn=function(a,f){this.app=a,this.env=f,this.comet=null,this.init(b[f][a]),this.publish(c),this.publish(d),this.publish(e)},a.ucs.CometConn.getConn=function(c,d){var e=null;if(a.config.debug=window.location.href.match(/debug_comet-conn=1/),d=d||"prod",window.location.href.match(/env=nonprod/)&&(d="nonprod"),a.log("get_conn: app="+c,"debug","CometConn"),a.Lang.isUndefined(d))throw new Error("getConn(): env is required.");if(a.Lang.isUndefined(c))throw new Error("getConn(): app is required.");if(!a.Object.hasKey(b,d))throw new Error("getConn(): cannot find config for env="+d);if(!a.Object.hasKey(b[d],c))throw new Error("getConn(): cannot find config for app="+c);return e=a.Lang.sub("{app}:{env}",{app:c,env:d}),a.Object.hasKey(g,e)?a.log("get_conn: instance is already created. key="+e,"debug","CometConn"):(a.log("get_conn: create instance. key="+e,"debug","CometConn"),g[e]=new a.ucs.CometConn(c,d)),g[e]},a.ucs.CometConn.prototype={counts:{},init:function(b){var c=this;a.log("init: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),c.comet=a.initComet(b.host),c.comet.addListener("/meta/handshake",a.bind(c.cbHandShake,c),!0),c.comet.addListener("/meta/subscribe",a.bind(c.cbSubscribe,c),!0),c.comet.addListener("/meta/unsubscribe",a.bind(c.cbUnsubscribe,c),!0),c.comet.addListener("/meta/connect",a.bind(c.cbConnect,c),!0),c.comet.addListener("/meta/disconnect",a.bind(c.cbDisconnect,c),!0),c.comet.addListener("/meta/unsuccessful",a.bind(c.cbUnsuccessful,c),!0),c.resetCounts()},extractMessage:function(a){return{clientId:a.clientId||"",channel:a.channel||"",timestamp:a.timestamp||"",error:a.error||""}},getComet:function(){return this.comet},getCounts:function(){return this.counts},resetCounts:function(){return this.counts={unsuccessful:{"/meta/handshake":0,"/meta/subscribe":0,"/meta/unsubscribe":0,"/meta/connect":0,"/meta/disconnect":0}},this},isDisconnect:function(c){var d=this,e=!0;return c.successful===!1&&a.Object.hasKey(d.counts.unsuccessful,c.channel)&&(d.counts.unsuccessful[c.channel]++,d.counts.unsuccessful[c.channel]<b.counts_max.unsuccessful[c.channel]&&(e=!1)),e},cbHandShake:function(d){var e=this,g=null;if(a.log("cb_handshake: app="+e.app+", env="+e.env,"debug","CometConn"),a.log(d,"debug"),a.Object.hasKey(d,"originalURI"))g=d.originalURI;else{if(!a.Object.hasKey(d,"uri"))return void this.fire(f,"uri / originalURI is missing in the callback_handshake response.");g=d.uri}a.log("cb_handshake. uri="+g,"debug","CometConn"),g===b[this.env][this.app].host?d.successful?e.fire(c,d):e.fire(f,"cb_handshake. successful=false"):e.fire(f,"cb_handshake.uri is not found in config. uri="+g),d&&d.successful&&e.resetCounts()},cbSubscribe:function(b){var c=this;a.log("cb_subscribe: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),b&&b.successful&&c.resetCounts()},cbUnsubscribe:function(b){var c=this;a.log("cb_unsubscribe: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),b&&b.successful&&c.resetCounts()},cbConnect:function(b){var c=this;a.log("cb_connect: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug")},cbDisconnect:function(b){var c=this;a.log("cb_disconnect: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug")},cbUnsuccessful:function(b){var c=this;a.log("cb_unsuccessful: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),c.isDisconnect(b)&&c.getComet().disconnect()},cbSystemStatus:function(b){a.log("cb_system_status","debug","CometConn"),a.log(b,"debug"),b&&this.fire("message",b)},cbNotification:function(b){a.log("cb_notifications","debug","CometConn"),a.log(b,"debug"),b&&this.fire(e,b)},initSystemStatus:function(b){a.log("init_system_status. channel="+b,"debug","CometConn"),this.comet.subscribe(b,a.bind(this.cbSystemStatus,this))},initNotification:function(){a.log("init_notifications","debug","CometConn"),this.comet.subscribe("/UNP/alerts/*",a.bind(this.cbNotification,this))},emitBeacon:function(b){if(a.Lang.isObject(a.ucs)&&a.Lang.isObject(a.ucs.Beacon))switch(b.type){case"info":a.ucs.Beacon.info(b);break;case"error":a.ucs.Beacon.error(b)}}},a.augment(a.ucs.CometConn,a.EventTarget,!0,null,{emitFacade:!0,broadcast:2})},"1.0",{requires:["event","event-custom","comet","ucs-beacon"]});window.ucs&&window.ucs.YObj&&window.ucs.YObj.use("node","ucs-comet-conn",function(a){var b=null,c=null,d=null,e={};b=a.one("#yucs-meta").getAttribute("data-authstate"),c=a.one("#yucs-meta").getAttribute("data-property"),d=a.one("#yucs-notifications"),a.Lang.isObject(d)||("signedin"===b||"mail"===c)&&a.Lang.isFunction(a.ucs.CometConn)&&(e.notifications=a.ucs.CometConn.getConn("notifications"),e.notifications.on("connect",function(){e.notifications.initNotification()}))});YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs"),a.ucs.DisclaimerSeed={init:function(){var b,c=!1,d=a.one("#yucs-disclaimer")?a.one("#yucs-disclaimer"):a.one("#yucs-disclaimer-md"),e=d.getAttribute("data-property"),f=(d.getAttribute("data-lang"),d.getAttribute("data-dss")),g=(d.getAttribute("data-cu"),d.getAttribute("data-cobrand"),!1),h=!1,i=(a.Cookie.get("DSS"),parseInt((new Date).getTime()/1e3),a.Cookie.getSub("ucs","disclaimer",Number),"desktop"),j="false",k=navigator.userAgent.toLowerCase(),l=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),m=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),n=(a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt'));this.jsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/388/js/disclaimer-min.js",this.cssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/388/css/disclaimer-min.css",a.one("#yucs-disclaimer")?i=a.one("#yucs-disclaimer").getAttribute("data-device"):a.one("#yucs-disclaimer-md")&&(i=a.one("#yucs-disclaimer-md").getAttribute("data-device")),j=i&&(i.match(/smartphone/gi)||i.match(/tablet/gi)),"frontpage"===e&&(i.match(/smartphone/gi)||i.match(/tablet/gi))&&(a.one("#OpenMenuBtn")&&a.one("#OpenMenuBtn").on("touchstart",this.setKillswitch,this),a.one("#OpenWidgetsBtn")&&a.one("#OpenWidgetsBtn").on("touchstart",this.setKillswitch,this)),f&&"0"===f&&k.indexOf("version")>=0&&k.indexOf("crios")<0&&(b=k.match(/version\/(\d+)/),i.match(/desktop/gi)&&b&&b[1]&&parseInt(b[1])<8?this.loadCSS(this.cssPath,this.jsPath):j&&a.UA.ios&&a.UA.ios<8&&this.loadCSS(this.cssPath,this.jsPath)),n&&(n=n.replace('"',""),n=n.replace("'",""),n=parseInt(n)),m&&(m=m.replace('"',""),m=m.replace("'",""),m=parseInt(m)),l?(l=l.replace('"',""),l=l.replace("'",""),l=parseInt(l)):c=!0,c=!0,g=!0,n&&1===n&&g===!0&&h===!1&&(n=a.Cookie.get("AO",{raw:!0}),n=n.replace("o=1","o=0"),a.Cookie.set("AO",n,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:!0}))},setKillswitch:function(){a.one("#yucs-disclaimer").setAttribute("data-killswitch","1")},loadCSS:function(b,c){var d={onSuccess:function(){this.loadJS(c)},onFailure:function(){this.loadCSS(b)},context:this};a.Get.css(b,d)},checkTimer:function(){var b=a.Cookie.getSub("ucs","disclaimerts",Number),c=(new Date).getTime();return c>=b||null===b?!0:!1},loadJS:function(b){var c={onFailure:function(){this.loadJS(b)},context:this};a.Get.script(b,c)}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()})}}();YUI.add("ucs-helpmenu",function(a){"use strict";a.namespace("ucs.HelpMenu");var b="ucs:helpMenuShow",c="ucs:helpDebugMenuShow",d="ucs:helpMenuItemClick",e="ucs:helpDebugMenuItemClick",f="ucs:utilityMenuShow",g="ucs:utilityMenuItemClick",h='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></div></li>{separatorBottom}',i='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></div></li>{separatorBottom}',j='<span class="yucs-separator" role="presentation"></span>',k="http://l.yimg.com/a/lib/ush/icon.gif",l="https://s.yimg.com/lq/lib/ush/icon.gif",m=YUI.namespace("YHELP.config"),n=a.one("#yucs-meta");n&&(m.locale=n.getData("languagetag"),m.product=n.getData("property"),n.getData("firstname")&&(m.user=n.getData("firstname"))),m.alignNode=a.one("#yucs"),a.ucs.HelpMenu=function(b){this.menuContainer=b.ancestor("div"),this.shown=!1,this.helpLink=a.one("#yucs-help_button"),this.helpLink.setAttribute("data-mad","true"),this.previewPanel=a.one("#yucs-help_inner"),this.ylt=this.previewPanel.getAttribute("data-yltmenushown"),this.PANEL_OFFSET=30,this.PANEL_OFFSET_Y=3,this.headerNode=a.one("#yucs"),a.ucs.HelpMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-help_inner"}]),this._initCustomEvents(),b.removeClass("yucs-hm-activate")},a.extend(a.ucs.HelpMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(b,{broadcast:2,emitFacade:!0}),this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),this.publish(e,{broadcast:2,emitFacade:!0}),this.publish(f,{broadcast:2,emitFacade:!0}),this.publish(g,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{location:"top",menuType:"minty-utility-item"}),a.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{location:"bottom",menuType:"minty-help-item"}),a.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{location:"bottom",menuType:"minty-debug-item"}),a.one("#yhelp-link")&&a.one("#yhelp-link").on("click",function(a){YUI.YHELP.config.uhClickEvent=a,YUI.YHELP.initiate()})},_showMenu:function(d){this.previewPanel.hasClass("yucs-hide")&&this._sendBeacon(),a.ucs.HelpMenu.superclass._showMenu.apply(this,arguments),"mail"===a.one("#yucs").getAttribute("data-property")&&this.menu.all("li").addClass("yucs-hide"),d&&(d.ctrlKey||d.metaKey)&&d.shiftKey?(this.fire(c),this.shown===!1?a.later(4e3,this,function(){this.fire(c)}):this._showDebugMenuItems()):(this.fire(b),this.fire(f),this.shown===!1?a.later(4e3,this,function(){this.fire(b),this.fire(f)}):this._showMenuItems()),this._setPosition()},_showDebugMenuItems:function(){this.shown=!0,this.menu.all("li").addClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","none"),this.menu.all("li.debug-item").removeClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","block")},_showMenuItems:function(){this.shown=!0,this.menu.all("li").removeClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","block"),this.menu.all("li.debug-item").addClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","none"),this._destructAria(),this._initAria()},_setPosition:function(){this.mailIcon=a.one("#yucs-help_button");var b,c=this.previewPanel.one(".yucs-dock"),d=c&&c.get("offsetWidth"),e=this.headerNode.get("offsetHeight");this.rtl?this.previewPanel.setX(Math.round(this.headerNode.getX()+this.PANEL_OFFSET)):a.one("#yucs-country")||this.previewPanel.setX(Math.round(this.headerNode.getX()+this.headerNode.get("offsetWidth")-this.panel.get("offsetWidth")-2)),this.panel.setY(a.one("#search_hot_keyword_block")?this.headerNode.getY()+e-this.PANEL_OFFSET_Y-30:e>0?this.headerNode.getY()+e-this.PANEL_OFFSET_Y:this.mailIcon.getY()+this.mailIcon.get("offsetHeight")+3),c&&(b=this.mailIcon.get("offsetWidth")/2-d/2,c.setX(this.mailIcon.getX()+b))},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._showMenu(a),this.panel.one("a").focus()),this.keyedup=!0)},_handleHelpMenuItems:function(b,c){a.log("help menu items received");var d,e,f=c&&c.location||"top",g=c&&c.menuType||"minty-help-item";b.menuGroups&&b.menuGroups.length&&(d=b.menuGroups,e=this.menu.one("#yuhead-help-panel"),b.reset&&e&&e.all("."+g).remove(!0),this._addMenuGroups(d,f,!1,g),this._showMenuItems())},_handleHelpDebugMenuItems:function(b){a.log("help menu items received");var c,d;b.menuGroups&&b.menuGroups.length&&(c=b.menuGroups,d=this.menu.one("#yuhead-help-panel"),b.reset&&d&&d.all(".minty-debug-item").remove(!0),this._addMenuGroups(c,"top",!0,"minty-debug-item"),this._showDebugMenuItems())},_handleMenuItemClick:function(b){a.log("help menu item click");var c,f,h,i;if(c=b.target,c=c.ancestor("a",!0),f=c.getAttribute("data-mad"),h=c.getAttribute("data-customevt"),i=c.ancestor("li").hasClass("disabled"))return void b.halt();if(h&&b.preventDefault(),!i){var j={actionData:f},k=c.ancestor("li");k.hasClass("debug-item")?this.fire(e,j):k.hasClass("minty-utility-item")?this.fire(g,j):this.fire(d,j)}},_addMenuGroups:function(a,b,c,d){var e,f,g,h=this.menu.one("#yuhead-help-panel"),i="",j=a.length;for(e=h.hasChildNodes(),f=0;j>f;f++)g=a[f].length,"bottom"===b?f>0&&(a[f][0].separatorTop=!0):(j-1>f||e)&&(a[f][g-1].separatorBottom=!0),i+=this._addMenuGroup(a[f],c,d);h.ancestor("div.yucs-yql_loading")&&h.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading"),"bottom"===b?h.append(i):h.prepend(i),h.one(".yucs-keepatbottom")&&h.all(".yucs-keepatbottom").each(function(a){h.append(a)})},_addMenuGroup:function(a,b,c){var d,e="",f=a.length;for(d=0;f>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass=c+" debug-item"):(a[d].isDebugItem=!1,a[d].menuClass=c+" minty-item"),e+=this._addMenuItem(a[d],c);return e},_addMenuItem:function(b,c){var d="";switch(b.checkedAria=b.isActive?'aria-checked="true"':"",b.disabledAria=b.isDisabled?'aria-disabled="true"':"",b.actionType){case"link":d=a.substitute(h,b,this._processTemplateValue);break;case"customEvent":d=a.substitute(i,b,this._processTemplateValue)}return d&&(d=b.isDebugItem?d.replace(/separator/,"separator debug-item "+c):d.replace(/separator/,"separator minty-item "+c)),d},_processTemplateValue:function(b,c,d){a.log("key = "+b+" value = "+c+" meta_data = "+d);var e="",f="https:"===document.location.protocol?l:k;switch(b){case"icon":void 0!==c&&(e="available"===c?'<img src="'+f+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+f+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+f+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+f+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+f+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(e=j);break;case"separatorBottom":c&&(e=j);break;case"actionData":c&&(e='data-mad="'+c+'"');break;case"isDisabled":c&&(e="disabled");break;case"isActive":c&&(e="sp active");break;case"checkedAria":e=c;break;default:e=c}return e},_sendBeacon:function(){this.ylt&&window.ucs._sendBeacon(this.ylt+"?t="+Math.random())}}),a.augment(a.ucs.HelpMenu,a.EventTarget)},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]}),function(){window.ucs.YObj.use("node","ucs-helpmenu",function(a){var b,c=a.one("#yucs").all(".yucs-hm-activate");c.each(function(c){b=new a.ucs.HelpMenu(c)})})}();function msToMicroS(a){var b=Math.round(1e3*a);return b}function varlenEncodingLength(a){for(var b=0;a>127;)a>>=7,b++;return b++,b}function varlenEncode(a,b,c){for(var d=0;a>127;)b[c+d]=127&a|128,a>>=7,d++;return b[c+d++]=127&a,c+d}function extractResourceTiming(a){var b=0;b+=varlenEncodingLength(msToMicroS(a.startTime)),b+=varlenEncodingLength(msToMicroS(a.redirectStart)),b+=varlenEncodingLength(msToMicroS(a.redirectEnd)),b+=varlenEncodingLength(msToMicroS(a.fetchStart)),b+=varlenEncodingLength(msToMicroS(a.domainLookupStart)),b+=varlenEncodingLength(msToMicroS(a.domainLookupEnd)),b+=varlenEncodingLength(msToMicroS(a.connectStart)),b+=varlenEncodingLength(msToMicroS(a.secureConnectionStart)),b+=varlenEncodingLength(msToMicroS(a.connectEnd)),b+=varlenEncodingLength(msToMicroS(a.requestStart)),b+=varlenEncodingLength(msToMicroS(a.responseStart)),b+=varlenEncodingLength(msToMicroS(a.responseEnd));var c=new Uint8Array(b),d=0;return d=varlenEncode(msToMicroS(a.startTime),c,d),d=varlenEncode(msToMicroS(a.redirectStart),c,d),d=varlenEncode(msToMicroS(a.redirectEnd),c,d),d=varlenEncode(msToMicroS(a.fetchStart),c,d),d=varlenEncode(msToMicroS(a.domainLookupStart),c,d),d=varlenEncode(msToMicroS(a.domainLookupEnd),c,d),d=varlenEncode(msToMicroS(a.connectStart),c,d),d=varlenEncode(msToMicroS(a.secureConnectionStart),c,d),d=varlenEncode(msToMicroS(a.connectEnd),c,d),d=varlenEncode(msToMicroS(a.requestStart),c,d),d=varlenEncode(msToMicroS(a.responseStart),c,d),d=varlenEncode(msToMicroS(a.responseEnd),c,d),btoa(String.fromCharCode.apply(null,c))}function extractBeacon(a){var b="^https://([^.]*).wc.yahoodns.net/i.gif$",c=new RegExp(b,"gi"),d=c.exec(a);return d[1]}setTimeout(function(){var a=Math.ceil(99999999999999*Math.random()).toString(36),b=["https://u-a"+a+".wc.yahoodns.net/i.gif","https://u-b"+a+".wc.yahoodns.net/i.gif","https://u-c"+a+".wc.yahoodns.net/i.gif"],c=0,d=b.length;for(Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&"isTrusted"!==b&&c++;return c};d>c;){var e=new Image;"performance"in window&&"getEntriesByType"in window.performance&&e.addEventListener("error",function(a){for(var b=window.performance.getEntriesByType("resource"),c=0;c<b.length;c++){var e=b[c].name;if("img"===b[c].initiatorType&&e.match(".*.yahoodns.net.*")&&!(extractBeacon(e)in a)&&(a[extractBeacon(e)]=extractResourceTiming(b[c]),Object.size(a)===d))for(var f in a)if(a.hasOwnProperty(f)&&"isTrusted"!==f){var g=new Image;g.src="https://r-"+f+"report.wc.yahoodns.net/cs/"+a[f]}}},!1),e.src=b[c],c++}},2e3);